# Node-RED Cloudflare Tunnels

## Overview

This Node-RED node allows you to easily create and manage secure Cloudflare tunnels directly from your Node-RED flows using the `cloudflared` binary. With this node, you can expose local services to the internet securely without complex network configurations.

## Features

- **Creates Cloudflare tunnels** directly from Node-RED.
- **Automatically manages tunnels** to prevent redundant or failed tunnels.
- **Outputs the public URL** generated by Cloudflare for accessing your local service.
- Stores tunnel information in the **global context** of Node-RED for easy management and monitoring.

## Installation

To install the `@inutil-labs/node-red-cloudflare-tunnels` node in your Node-RED setup, run the following command:

```bash
npm install @inutil-labs/node-red-cloudflare-tunnels
```

````

## Usage

Once installed, you can use the node in your Node-RED flow by adding a `cloudflared` node. The node will output a public URL when the tunnel is successfully created.

### Input

- The node doesn't require specific input to trigger the tunnel creation. It will automatically start a Cloudflare tunnel once deployed.

## Output

The output of the node is an object sent via `msg.payload`, structured as follows:

```json
{
  "tunnelCreated": "https://example.trycloudflare.com",
  "localUrl": "http://localhost:1880"
}
```

Where:

- **`tunnelCreated`**: The public URL of the Cloudflare tunnel.
- **`localUrl`**: The local URL of the service exposed through the tunnel (optional).

## Example Flow

Hereâ€™s an example of how to use the node in a flow:

1. Use an **Inject node** to trigger the `cloudflared` node.
2. The `cloudflared` node will create a tunnel and output the public URL to `msg.payload.tunnelCreated`.
3. You can use a **Debug node** to log the URL or use it for further processing in your flow.

## Configuration

The node has the following configurable options:

- **Cloudflared Path**: The path to the `cloudflared` binary on your system.
- **Local URL**: The local URL you want to expose (optional).
- **Node-RED Global Context**: The node stores information about the tunnel in the Node-RED global context under the `tunelList` key.

## License

MIT License. See LICENSE for more information.


````
